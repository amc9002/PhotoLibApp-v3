<div class="photo-viewer-overlay open" (click)="onBackdropClick()">
  <div class="photo-viewer-grid" (click)="$event.stopPropagation()">
    <!-- CAROUSEL -->
    <div class="viewer-carousel">
      <app-photo-carousel
        [photos]="photos"
        [activePhotoId]="activePhotoId"
        (photoSelected)="photoSelected.emit($event)"
      ></app-photo-carousel>
    </div>

    <!-- LEFT -->
    <div class="viewer-left">
      <div class="viewer-side-top"></div>

      <div class="viewer-side-center">
        <button
          class="nav-arrow"
          (click)="selectPrev()"
          aria-label="Previous photo"
        >
          ‹
        </button>
      </div>
    </div>

    <!-- CENTER -->
    <div class="viewer-center">
      <app-photo-viewer-main
        [photoId]="activePhotoId"
        [open]="true"
      ></app-photo-viewer-main>
    </div>

    <!-- RIGHT -->
    <div class="viewer-right">
      <div class="viewer-side-top">
        <button class="viewer-close" (click)="close.emit()">✕</button>

        <app-photo-actions
          (editMetadata)="openEditMetadata()"
        ></app-photo-actions>
      </div>

      <div class="viewer-side-center">
        <button
          class="nav-arrow"
          (click)="selectNext()"
          aria-label="Next photo"
        >
          ›
        </button>
      </div>
    </div>
  </div>
</div>

<app-edit-photo-metadata-modal
  *ngIf="editMetadataOpen"
  (close)="closeEditMetadata()"
></app-edit-photo-metadata-modal>
